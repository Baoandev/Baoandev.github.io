<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.127.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Athena and Quicksight :: Bao An Thai</title>

    
    <link href="/css/nucleus.css?1726578020" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1726578020" rel="stylesheet">
    <link href="/css/hybrid.css?1726578020" rel="stylesheet">
    <link href="/css/featherlight.min.css?1726578020" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1726578020" rel="stylesheet">
    <link href="/css/auto-complete.css?1726578020" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1726578020" rel="stylesheet">
    <link href="/css/theme.css?1726578020" rel="stylesheet">
    <link href="/css/hugo-theme.css?1726578020" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1726578020" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1726578020"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/5-queryandvisualize/5.1-athenaandquicksight/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1726578020"></script>
<script type="text/javascript" src="/js/auto-complete.js?1726578020"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/baoandev.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1726578020"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduce/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-realtime/" title="Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink " class="dd-item 
        
        
        
        ">
      <a href="/2-realtime/">
           <b> 2. </b> Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/2-realtime/2.1-realtimesetup/" title="Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink Prelab setup" class="dd-item 
        
        
        
        ">
      <a href="/2-realtime/2.1-realtimesetup/">
           <b> 2.1 </b> Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink Prelab setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-realtime/2.2-lab/" title="Lab: Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink" class="dd-item 
        
        
        
        ">
      <a href="/2-realtime/2.2-lab/">
           <b> 2.2 </b> Lab: Real-Time Clickstream Anomaly Detection with Amazon Managed Service for Apache Flink
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/2-realtime/2.3-labglue/" title="Lab: Streaming ETL with Glue" class="dd-item 
        
        
        
        ">
      <a href="/2-realtime/2.3-labglue/">
           <b> 2.3 </b> Lab: Streaming ETL with Glue
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-ingestion/" title="Ingestion with DMS" class="dd-item 
        
        
        
        ">
      <a href="/3-ingestion/">
           <b> 3. </b> Ingestion with DMS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-ingestion/3.1-skipdms/" title="Option 3: Skip DMS" class="dd-item 
        
        
        
        ">
      <a href="/3-ingestion/3.1-skipdms/">
           <b> 3.1 </b> Option 3: Skip DMS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-transformingdatawithglue/" title="Transforming data with Glue" class="dd-item 
        
        
        
        ">
      <a href="/4-transformingdatawithglue/">
           <b> 4. </b> Transforming data with Glue
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-transformingdatawithglue/4.1-datavalidationandetl/" title="Data Validation and ETL" class="dd-item 
        
        
        
        ">
      <a href="/4-transformingdatawithglue/4.1-datavalidationandetl/">
           <b> 4.1 </b> Data Validation and ETL
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-queryandvisualize/" title="Query and Visualize" class="dd-item 
        parent
        
        
        ">
      <a href="/5-queryandvisualize/">
           <b> 5. </b> Query and Visualize
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-queryandvisualize/5.1-athenaandquicksight/" title="Athena and Quicksight" class="dd-item 
        
        active
        
        ">
      <a href="/5-queryandvisualize/5.1-athenaandquicksight/">
           <b> 5.1 </b> Athena and Quicksight
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-gluedatabrew/" title="Glue DataBrew" class="dd-item 
        
        
        
        ">
      <a href="/7-gluedatabrew/">
           <b> 6. </b> Glue DataBrew
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/7-gluedatabrew/7.1-prelab/" title="DataBrew Prelab" class="dd-item 
        
        
        
        ">
      <a href="/7-gluedatabrew/7.1-prelab/">
           <b> 6.1 </b> DataBrew Prelab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/7-gluedatabrew/7.2-gluedatabrew/" title="Data preparation with Glue DataBrew" class="dd-item 
        
        
        
        ">
      <a href="/7-gluedatabrew/7.2-gluedatabrew/">
           <b> 6.2 </b> Data preparation with Glue DataBrew
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com/"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group - FB Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="http://baoandev.github.io/5-queryandvisualize/5.1-athenaandquicksight/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="http://baoandev.github.io/vi/5-queryandvisualize/5.1-athenaandquicksight/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b> Last Updated </b> <br>
    <i><font color=orange>18-08-2024</font></i>
</left>
<left>
    <br>
    <br>
    <b> Team </b> <br>

    <i> 
        <a href="https://www.linkedin.com/in/an-thai-6a1b16316/"  style="color:orange">Bảo An </a>
    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Data with AWS</a> > <a href='/5-queryandvisualize/'>Query and Visualize</a> > Athena and Quicksight
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#build-an-amazon-quicksight-dashboard">Build an Amazon QuickSight Dashboard</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Athena and Quicksight
            </h1>
          

        



	<h3 id="getting-started">Getting Started</h3>
<p>In this lab, you will complete the following tasks:</p>
<ol>
<li>Query data and create a view with Amazon Athena</li>
<li>Athena Workgroups to Control Query Access and Costs</li>
<li>Build a dashboard with Amazon QuickSight</li>
</ol>
<h4 id="query-data-with-amazon-athena">Query Data with Amazon Athena</h4>
<p>Get start Athena</p>
<p>In the AWS services console, search for Athena.</p>
<p>Click Get Started
<img alt="Query and Visualize" src="/images/5.queryandvisualize/0002-qandv.png"></p>
<p>Then click set up a query result location in Amazon S3 at the top
<img alt="Query and Visualize" src="/images/5.queryandvisualize/0003-qandv.png"></p>
<p>In the pop-up window in the Query result location field, click the Select icon. Choose the bucket with the string dmslabs3bucket ( e.g: dmslab-student-dmslabs3bucket-xg1hdyq60ibs), then click on Select button.
Append athenaquery/ at the end of the S3 location, don&rsquo;t forgot the / at the end. Click on Save.</p>
<p><img alt="Query and Visualize" src="/images/5.queryandvisualize/0004-qandv.png"></p>
<ol>
<li>In the Query Editor, select your newly created database e.g., &ldquo;ticketdata”.</li>
<li>Click the table named &ldquo;parquet_sporting_event_ticket&rdquo; to inspect the fields. Note: The type for fields id, sporting_event_id and ticketholder_id should be (double).
<img alt="Query and Visualize" src="/images/5.queryandvisualize/0005-qandv.png"></li>
</ol>
<p>Next, we will query across tables parquet_sporting_event, parquet_sport_team, and parquet_sport location.</p>
<ol start="3">
<li>Copy the following SQL syntax into the Query 1 tab and click Run.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    e.id <span style="color:#66d9ef">AS</span> event_id,
</span></span><span style="display:flex;"><span>    e.sport_type_name <span style="color:#66d9ef">AS</span> sport,
</span></span><span style="display:flex;"><span>    e.start_date_time <span style="color:#66d9ef">AS</span> event_date_time,
</span></span><span style="display:flex;"><span>    h.name <span style="color:#66d9ef">AS</span> home_team,
</span></span><span style="display:flex;"><span>    a.name <span style="color:#66d9ef">AS</span> away_team,
</span></span><span style="display:flex;"><span>    l.name <span style="color:#66d9ef">AS</span> <span style="color:#66d9ef">location</span>,
</span></span><span style="display:flex;"><span>    l.city
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> parquet_sporting_event e,
</span></span><span style="display:flex;"><span>     parquet_sport_team h,
</span></span><span style="display:flex;"><span>     parquet_sport_team a,
</span></span><span style="display:flex;"><span>     parquet_sport_location l
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span>
</span></span><span style="display:flex;"><span>    e.home_team_id <span style="color:#f92672">=</span> h.id
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">AND</span> e.away_team_id <span style="color:#f92672">=</span> a.id
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">AND</span> e.location_id <span style="color:#f92672">=</span> l.id;
</span></span></code></pre></div><p><img alt="Query and Visualize" src="/images/5.queryandvisualize/0006-qandv.png"></p>
<p>The results appear beneath the query window.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/0007-qandv.png"></p>
<ol start="4">
<li>As shown above Click Create and then select View from query</li>
<li>Name the view sporting_event_info and click Create
<img alt="Query and Visualize" src="/images/5.queryandvisualize/0008-qandv.png"></li>
</ol>
<p>Your new view is created</p>
<p><img alt="Query and Visualize" src="/images/5.queryandvisualize/0009-qandv.png"></p>
<ol start="6">
<li>Copy the following SQL syntax into the Query 3 tab.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> t.id <span style="color:#66d9ef">AS</span> ticket_id,
</span></span><span style="display:flex;"><span>e.event_id,
</span></span><span style="display:flex;"><span>e.sport,
</span></span><span style="display:flex;"><span>e.event_date_time,
</span></span><span style="display:flex;"><span>e.home_team,
</span></span><span style="display:flex;"><span>e.away_team,
</span></span><span style="display:flex;"><span>e.<span style="color:#66d9ef">location</span>,
</span></span><span style="display:flex;"><span>e.city,
</span></span><span style="display:flex;"><span>t.seat_level,
</span></span><span style="display:flex;"><span>t.seat_section,
</span></span><span style="display:flex;"><span>t.seat_row,
</span></span><span style="display:flex;"><span>t.seat,
</span></span><span style="display:flex;"><span>t.ticket_price,
</span></span><span style="display:flex;"><span>p.full_name <span style="color:#66d9ef">AS</span> ticketholder
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> sporting_event_info e,
</span></span><span style="display:flex;"><span>parquet_sporting_event_ticket t,
</span></span><span style="display:flex;"><span>parquet_person p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span>
</span></span><span style="display:flex;"><span>t.sporting_event_id <span style="color:#f92672">=</span> e.event_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">AND</span> t.ticketholder_id <span style="color:#f92672">=</span> p.id
</span></span></code></pre></div><ol start="7">
<li>Click on Save as button Give this query a name: create_view_sporting_event_ticket_info and some description and then, click on Save query.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00011-qandv.png"></li>
</ol>
<p>Back to the query editor, you will see the query name changed. Now, click on ­­Run</p>
<p>The results appear beneath the query window.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00010-qandv.png"></p>
<ol start="8">
<li>
<p>As shown above, click View from query.</p>
</li>
<li>
<p>Name the view sporting_event_ticket_info and click Create.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00012-qandv.png"></p>
</li>
<li>
<p>Copy the following SQL syntax into the Query 5 tab.</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>sport,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">count</span>(<span style="color:#66d9ef">distinct</span> <span style="color:#66d9ef">location</span>) <span style="color:#66d9ef">as</span> locations,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">count</span>(<span style="color:#66d9ef">distinct</span> event_id) <span style="color:#66d9ef">as</span> events,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">as</span> tickets,
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">avg</span>(ticket_price) <span style="color:#66d9ef">as</span> avg_ticket_price
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> sporting_event_ticket_info
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><p><img alt="Query and Visualize" src="/images/5.queryandvisualize/00013-qandv.png"></p>
<p>Click on Save as and give this query name: analytics_sporting_event_ticket_info and some description and then, click on Save.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00015-qandv.png"></p>
<p>The name of the New Query 5 will be changed to one assigned in previous step. Click on Run.</p>
<p>You query returns two results in approximately five seconds. The query scans 25 MB of data, which prior to converting to parquet, would have been 1.59GB of CSV files.</p>
<p><img alt="Query and Visualize" src="/images/5.queryandvisualize/00014-qandv.png"></p>
<p>The purpose of saving the queries is to have clear distinction between the results of the queries running on one view. Otherwise, your query results will be saved under “Unsaved” folder within the S3 bucket location provided to Athena to store query results. Please navigate to S3 bucket to observe these changes, as shown below:</p>
<p><img alt="Query and Visualize" src="/images/5.queryandvisualize/00016-qandv.png"></p>
<h3 id="build-an-amazon-quicksight-dashboard">Build an Amazon QuickSight Dashboard</h3>
<h4 id="set-up-quicksight">Set up QuickSight</h4>
<ol>
<li>
<p>In the AWS services console, search for QuickSight.
If this is the first time you have used QuickSight, you are prompted to create an account.</p>
</li>
<li>
<p>Click Sign up for QuickSight.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00017-qandv.png"></p>
</li>
<li>
<p>Select your DMS bucket (e.g., &ldquo;xxx-dmslabs3bucket-xxx&rdquo;), Click Finish.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00018-qandv.png"></p>
</li>
</ol>
<p><img alt="Query and Visualize" src="/images/5.queryandvisualize/00019-qandv.png"></p>
<ol start="4">
<li>
<p>On the top right corner, click New analysis.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00020-qandv.png"></p>
</li>
<li>
<p>Click New dataset.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00021-qandv.png"></p>
</li>
<li>
<p>On the Create a Dataset page, select Athena as the data source.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00022-qandv.png"></p>
</li>
<li>
<p>For Data source name, type ticketdata-qs , then click Validate connection.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00023-qandv.png"></p>
</li>
<li>
<p>Click Create data source.</p>
</li>
<li>
<p>In the Database drop-down list, select the database ticketdata.</p>
</li>
<li>
<p>Choose the &ldquo;sporting_event_ticket_info&rdquo; table and click Select.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00024-qandv.png"></p>
</li>
<li>
<p>To finish data set creation, choose the option Import to SPICE for quicker analytics and click Visualize. If your SPICE has 0 bytes available, choose the second choice Directly query your data.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00025-qandv.png"></p>
</li>
</ol>
<p>You will now be taken to the QuickSight Visualize interface where you can start building your dashboard.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00026-qandv.png"></p>
<h4 id="create-quicksight-charts">Create QuickSight Charts</h4>
<p>In this section i will take you through some of the different chart types.</p>
<ol>
<li>
<p>In the Fields list, click the ticket_price column to populate the chart.</p>
</li>
<li>
<p>Click the expand icon in corner of &ldquo;ticket_price&rdquo; field, and select Show as Currency to show the number in dollar value.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00028-qandv.png"></p>
</li>
<li>
<p>You can add visual by clicking Add button from the Visuals pane of the screen.</p>
</li>
</ol>
<ul>
<li>In the Visual types area, choose the Vertical bar chart icon.</li>
<li>This layout requires a value for the X-axis. In Fields list, select the event_date_time field and you should see the visualization update.</li>
<li>For Value Y-axis, select “ticket_price” from the Field list.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00029-qandv.png"></li>
</ul>
<ol start="4">
<li>
<p>You can drag and move other visuals to adjust space in dashboard. In the Fields list, click and drag the seat_level field to the Group/Color box. You can also use the slider below the x axis to fit all of the data.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00030-qandv.png">
Let’s build on this one step further by changing the chart type:</p>
</li>
<li>
<p>In the Visuals pane, click Vertical bar chart under change visual type and choose the Clustered bar combo chart icon.</p>
</li>
<li>
<p>In the Fields list, click and drag the ticketholder field to the Lines box.</p>
</li>
<li>
<p>In the Lines box, click the dropdown box and choose Aggregate: Count Distinct for Aggregate. You can then see the y-axis update on the right-hand side.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00031-qandv.png"></p>
</li>
</ol>
<h4 id="create-quicksight-parameters">Create QuickSight Parameters</h4>
<p>In the next section we are going to create some parameters with controls for the dashboard, then assign these to a filter for all the visuals.</p>
<ol>
<li>
<p>From the Tool bar, select Parameters icon.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00032-qandv.png"></p>
</li>
<li>
<p>Click Add to create a new parameter with a Name.</p>
</li>
<li>
<p>For Name, type EventFrom.</p>
</li>
<li>
<p>For Data type, choose Datetime.</p>
</li>
<li>
<p>For Time granularity, set Hour.</p>
</li>
<li>
<p>For Default value, select the value from calendar as start date available in your graph for event_date_time. For example, 2021-01-01 00:00.</p>
</li>
<li>
<p>Click Create, and then close the Parameter Added dialog box.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00033-qandv.png"></p>
</li>
<li>
<p>Create another parameter with the following attributes:</p>
<ul>
<li>Name: EventTo</li>
<li>Data type: Datetime</li>
<li>For Time granularity, set Hour.</li>
<li>For Default value, select the value from calendar as end date available in your graph for event_date_time. For example, 2022-01-01 00:00</li>
<li>Click Create
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00034-qandv.png"></li>
</ul>
</li>
<li>
<p>In next window, you can select any option to perform any operation with the parameter. Alternatively, you can click the three dots for the EventFrom parameter and choose Add control.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00035-qandv.png"></p>
</li>
<li>
<p>For Display name, specify Event From and click Add.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00036-qandv.png"></p>
</li>
<li>
<p>Repeat the process to add a control for EventTo with display name Event To</p>
</li>
</ol>
<p>You should now be able to see and expand the Controls section above the chart.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00037-qandv.png"></p>
<h4 id="create-a-quicksight-filter">Create a QuickSight Filter</h4>
<p>To complete the process, we will wire up a filter to these controls for all visuals.</p>
<ol>
<li>
<p>From the Tool bar, choose Filter.</p>
</li>
<li>
<p>Click the plus icon (+) to add a filter for the field event_date_time.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00038-qandv.png"></p>
</li>
<li>
<p>Click this filter to edit the properties.</p>
</li>
<li>
<p>Select All applicable visuals in the Applied To dropdown</p>
</li>
<li>
<p>For Filter type, choose Date &amp; Time range and Condition as Between.</p>
</li>
<li>
<p>Select option Use Parameter, click Yes to apply to all visual.</p>
</li>
<li>
<p>For Start date parameter, choose EventFrom.</p>
</li>
<li>
<p>For End date parameter, choose EventTo.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00039-qandv.png"></p>
</li>
<li>
<p>Click Apply.</p>
</li>
</ol>
<h4 id="add-calculated-fields">Add Calculated Fields</h4>
<p>In the next section, you will learn, how to add calculated fields for &ldquo;day of week&rdquo; and &ldquo;hour of day&rdquo; to your dataset and a new scatter plot for these two dependent variables.</p>
<ol>
<li>
<p>Click the Data menu and select Add Calculated Field.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00040-qandv.png"></p>
</li>
<li>
<p>Give it a name event_day_of_week</p>
</li>
<li>
<p>For Formula, type extract(&lsquo;WD&rsquo;,{event_date_time})</p>
</li>
<li>
<p>Click Save
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00041-qandv.png"></p>
</li>
<li>
<p>Add another calculated field with the following attributes:</p>
<ul>
<li>Calculated field name: event_hour_of_day</li>
<li>Formula: extract(&lsquo;HH&rsquo;,{event_date_time})</li>
</ul>
</li>
<li>
<p>Click Visualize icon from the Tool bar and choose Add visual.
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00042-qandv.png"></p>
</li>
<li>
<p>For field type, select the scatter plot.</p>
</li>
<li>
<p>In the Fields list, click the following attributes to set the graph attributes:</p>
<ul>
<li>X-axis: &ldquo;event_hour_of_day&rdquo;</li>
<li>Y-axis: &ldquo;event_day_of_week&rdquo;</li>
<li>Size: &ldquo;ticket_price&rdquo;
<img alt="Query and Visualize" src="/images/5.queryandvisualize/00043-qandv.png"></li>
</ul>
</li>
</ol>
<p>You can now click on Publish on the top right corner of screen to publish your visuals. You can also, share it by clicking on the Share menu.</p>
<p>A dashboard is a read-only snapshot of an analysis that you can share with other Amazon QuickSight users for reporting purposes. In Dashboard other users can still play with visuals and data but that will not modify dataset.</p>
<p>You can share an analysis with one or more other users with whom you want to collaborate on creating visuals. Analysis provides other uses to write and modify data set.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/5-queryandvisualize/" title="Query and Visualize"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/7-gluedatabrew/" title="Glue DataBrew" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1726578020"></script>
    <script src="/js/perfect-scrollbar.min.js?1726578020"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1726578020"></script>
    <script src="/js/jquery.sticky.js?1726578020"></script>
    <script src="/js/featherlight.min.js?1726578020"></script>
    <script src="/js/highlight.pack.js?1726578020"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1726578020"></script>
    <script src="/js/learn.js?1726578020"></script>
    <script src="/js/hugo-learn.js?1726578020"></script>

    <link href="/mermaid/mermaid.css?1726578020" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1726578020"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
